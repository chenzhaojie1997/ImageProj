# NEDI

## 原始NEDI
1. 论文名New edge-directed interpolation。基于维纳滤波思想，求解最优滤波器
2. m=4时效果明显优于双线性插值、略优于双三次插值和Lanczos
3. m=2插值结果明显不对；m=4效果较优；m=6相比m=4边缘锯齿、噪声减轻明显，但清晰度还在同一水准；m=8相比m=6改善较小，改善方向仍然是锯齿噪声的减轻
4. m=6相比m=4，窗口变大了2.25倍，在保证清晰度的情况下，锯齿、噪声能明显改善。而m=8相比m=6改善并不明显。因为首先m=6已获得较好效果，再度大幅增加很难；其次窗口信息的增益并不明显
5. 基于m=6和m=4的发现，目前AI超分在疯狂扩大感受野的同时，产生“油画”的感觉也就能理解了

## 改进NEDI —— 性能改进1
1. 改进目标：在原始NEDI算法，直接使用矩阵点乘结果作为相似度度量，能否使用更合理的相似性度量指标
2. 改进方法：具体的相似性度量指标换成了协方差，而不是直接向量点乘
3. 使用协方差方法产生的边缘更好，但是代价是更多的锯齿和噪声
4. 这种方法，可能会产生过度处理的边缘
5. 随着m增大，展示出和NEDI一样的规律：随着m增大，使用的信息更多，在边缘的锯齿、图像的噪声会变小
6. 随着m增大，改进方法的优势在减少。在m=6情况下，改进前后在边缘上已没有明显差异
7. 一些感想
  （1）做超分本质上好像在做边缘
  （2）基于（1），更好的超分方法本质上就是产生更锐利边缘的同时伴随更窄的过度区域、带来更少的锯齿、更轻的噪声
  （3）合理的、可以接受的边缘锯齿会一定程度上带来图像清晰的感觉；但更明显的边缘锯齿会带来更多噪声；所以同一水平的算法应该要选择好在锯齿、噪声等方面做好平衡

## 改进NEDI —— 性能改进2
1. 改进目标：在原始的NEDI中，由于不知道高分的自相关性，所以使用低分像素上的相关性来代替。能否代替使用超分像素的相关性？这样或许可以发展一种迭代式的算法，coarse-to-fine地处理
2. 改机方法：先用双线性/NEDI插值把低分插值成超分，然后在超分图上计算自相关性，在超分图上不断进行refine。即【低分】-> 【超分】->【超分】..。这样低分到超分的流程只进行一次，剩余的都是在refine。
3. 前端插值使用了双线性实验之后发现效果并不佳。反思后好像这种方法在原理上就有缺陷——NEDI的基本假设是维纳滤波，维纳滤波的目的是求最优的加权滤波器。这样，这种方法就相当于——在双线性插值图像上，从邻域上寻找一个最优的滤波器/加权系数，使得输出圷是实际图像的最小均方差估计。但是这种方法的问题是，它使用的双线性插值之后的图像，从双线性插值上加权的结果肯定不会比原来好很多。而原始NEDI算法使用的要么是真实点，要么是NEDI插值点，所以可以改善这个问题。
4. 前端使用NEDI插值。总的来说有些许效果。但是其效果主要体现在多余噪声的下降，对边缘的改善相当有限。这样看来，对插值/超分有贡献的地方主要在于前端插值，而后面的refine基本上并不能做到对边缘改善。这是合理，或者合符预期的，因为后面的refine本质上还是对NEDI插值的结果进行加权的滤波。而加权的滤波往往是一个低通滤波器，这里的NEDI能做到保边的情况下有降噪效果已经很优秀了；同分辨率上低通的加权滤波的方法我想基本上很难做到对边缘有很好的改善。
5. 这样看来，这种基于低通加权滤波的方法，需要在上采样的时候（1）尽量合理使用真实点；（2）在上采样的时候就一次性做好，不要希望往后在上采样的分辨率上进行refine。
6. NEDI的这种方法似乎能同时做到保边和降噪，这可能能发展出一种新的降噪方法？
7. ”同分辨率上低通的加权滤波的方法我想基本上很难做到对边缘有很好的改善“。或许这就是超分方法发展到后面都把上采样器放在最后的原因？

## 其他应用
1. 原论文中提到，这种方法也可以应用在去马赛克任务上，这里先不深入研究，留下个种子。

# INTR

## 1. 原始INTR
1. 原论文是 An Edge-Guided Image Interpolation Algorithm via Directional Filtering and Data Fusion。第一作者张磊
2. 这里主要实现原论文中的简化版本。核心思想是根据方差自适应调整45°和135°插值结果的权重，以达到插值结果主要沿着灰度变化不大方向进行的目的
3. 总体定性来说，边缘相比双线性有明显优势，但是明显差于NEDI
4. m取从3变化到9，差别不大。这是可以预期的，因为窗口m大小的作用只在预计方差上。而使用方差的形势判断一个像素附近是否有边缘，使用更大的窗口收益并不大
5. 有一个明显的缺点就是容易受噪声影响。这是可以预期的，假如待插值附近的点有一个噪点，那么使用方差方法很有可能把它认为是边缘，于是赋给它更大权重。噪声于是就被保留了下来。
6. 给我的一个提示，或者经验就是，考虑到用边缘信息的，都应该考虑噪声的影响，或者考虑将它们区分开。因为它们在数据上有类似的统计量属性，但是视觉上却产生完全不同的效果。

# Lanczos
1. 基于原始Lanczos方法改进，改进之处在于可以调整插值核
2. 类似于Lanczos这种可以缩放任意倍的插值方法还是有其价值，当需要放大的场景不是2,4,8等倍数时，一种可行的方法是先用优秀的超分方法（传统超分、AISR等）放大到一个更高的倍数，再使用任意倍率插值方法下采样到想要的分辨率
3. 开组会时，小组长曾经提过，以前H的PQ人员会专门对插值权重做调整，本质上就是调整插值核